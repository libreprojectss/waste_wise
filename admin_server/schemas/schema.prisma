datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Account {
    id       Int       @id @default(autoincrement())
    email    String    @unique
    password String
    Clients  Clients[]
    Picker   Picker[]
}

model Clients {
    id           Int        @id @default(autoincrement())
    acccount_id  Int        @unique
    name         String
    phone_number String?
    user         Account    @relation(fields: [acccount_id], references: [id], onDelete: Cascade)
    Pickeups     Pickeups[]
}

model Picker {
    id               Int                @id @default(autoincrement())
    acccount_id      Int                @unique
    name             String
    phone_number     String
    available        Boolean            @default(true)
    user             Account            @relation(fields: [acccount_id], references: [id], onDelete: Cascade)
    Pickeups         Pickeups[]
    PickupHistory    PickupHistory[]
    PickerAssignment PickerAssignment[]
}

model Pickeups {
    id           Int     @id @default(autoincrement())
    location     Json
    requested_by Clients @relation(fields: [requested_id], references: [acccount_id])
    requested_id Int
    assigned_to  Picker  @relation(fields: [assigned_id], references: [acccount_id])
    assigned_id  Int
    is_picked    Boolean @default(false)
}

model PickupHistory {
    id          Int      @id @default(autoincrement())
    picked_date DateTime
    picked_by   Picker   @relation(fields: [picker_id], references: [acccount_id])
    picker_id   Int
}

model PickerAssignment {
    id                Int      @id @default(autoincrement())
    picked_date       DateTime
    picked_account_id Picker   @relation(fields: [picker_id], references: [acccount_id])
    picker_id         Int
}

model Location {
    id  Int    @id @default(autoincrement())
    lat BigInt
    lng BigInt
}

model ClusterQueue {
    id         Int    @id @default(autoincrement())
    max_radius BigInt
    centroid   Json
    points     Json[]
}
